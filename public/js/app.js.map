{"version":3,"sources":["map.js","jquery.popdown.js","app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7JA","file":"app.js","sourcesContent":["var map;\n\nvar watershed;\nvar embay_shape;\nvar treatment;\nvar func;\nvar treatment_polygons = new Array();\nrequire([\n\t\t\"esri/map\",\n\t\t\"esri/dijit/BasemapGallery\",\n\t\t\"esri/arcgis/utils\",\n\t\t\"dojo/parser\",\n\t\t\"esri/layers/ArcGISDynamicMapServiceLayer\",\n\t\t\"esri/layers/ImageParameters\",\n\t\t\"esri/layers/FeatureLayer\",\n\n\t\t\"esri/toolbars/draw\",\n\t\t// \"esri/toolbars/edit\",\n\t\t\"esri/symbols/SimpleFillSymbol\",\n\t\t\"esri/graphic\",\n\t\t\"esri/Color\",\n\n\t\t\"esri/tasks/query\",\n\t\t\"esri/tasks/QueryTask\",\n\t\t\"esri/dijit/LayerList\",\n\t\t\"esri/geometry/Extent\",\n\n\n\t\t// \"esri/SpatialReference\",\n\t\t// \"dijit/layout/BorderContainer\", \n\t\t// \"dijit/layout/ContentPane\", \n\t\t// \"dijit/TitlePane\",\n\n\t\t\"dojo/dom\",\n\t\t\"dojo/on\",\n\t\t\"dojo/dom-construct\",\n\t\t\"dojo/domReady!\"\n\t],\n\tfunction(\n\t\tMap,\n\t\tBasemapGallery, \n\t\tarcgisUtils,\n\t\tparser,\n\t\tArcGISDynamicMapServiceLayer,\n\t\tImageParameters,\n\t\tFeatureLayer,\n\n\t\tDraw,\n\t\t// Edit,\n\t\tSimpleFillSymbol,\n\t\tGraphic,\n\t\tColor,\n\n\t\tQuery,\n\t\tQueryTask,\n\t\tLayerList,\n\t\tExtent,\n\t\tdom, on,\n\t\tdomConstruct\n\t) {\n\t\tparser.parse();\n\n\t\tvar initialExtent = new Extent({ \"xmin\": -7980970.14, \"ymin\": 5033003.02, \"xmax\": -7705796.84, \"ymax\": 5216451.89, \"spatialReference\": { \"wkid\": 102100 } });\n\t\tif (!center_x ) {\n\t\t\tcenter_x = -70.35;\n\t\t\tcenter_y = 41.68;\n\t\t}\n\t\t// console.log('x: ' + center_x + ' and y: '+ center_y);\n\t\tmap = new Map(\"map\", {\n\t\t\t// center: [-70.35, 41.68],\n\t\t\tcenter: [center_x, center_y],\n\t\t\t// extent: initialExtent,\n\t\t\tzoom: 14,\n\t\t\tbasemap: \"gray\",\n\t\t\tslider: true,\n\t\t\tsliderOrientation: \"horizontal\"\n\t\t});\n\t\t// map.on(\"load\", createToolbar);\n\t\tmap.on(\"load\", initToolbar);\n\n\t\tvar fillSymbol = new SimpleFillSymbol();\n\n\t\tfunction initToolbar() {\n\t\t\ttb = new Draw(map);\n\t\t\ttb.on(\"draw-end\", addGraphic);\n\n\t\t\t// event delegation so a click handler is not\n\t\t\t// needed for each individual button\n\t\t\ton(dom.byId(\"info\"), \"click\", function(evt) {\n\t\t\t\tif (evt.target.id === \"info\") {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar tool = evt.target.id.toLowerCase();\n\t\t\t\tmap.disableMapNavigation();\n\t\t\t\ttb.activate(tool);\n\t\t\t});\n\t\t}\n\n\n\n\t\t/***********************************\n\t\t\tNeed to have an array of custom polygons so we can access them later\n\t\t\tSee 208 viewer for example with technology icon & color coding\n\n\t\t************************************/\n\t\tfunction addGraphic(evt) {\n\t\t\t//deactivate the toolbar and clear existing graphics \n\t\t\ttb.deactivate();\n\t\t\tmap.enableMapNavigation();\n\n\t\t\t// figure out which symbol to use\n\t\t\tvar symbol;\n\t\t\tsymbol = fillSymbol;\n\t\t\tvar polystring = '';\n\t\t\tmap.graphics.add(new Graphic(evt.geometry, symbol));\n\t\t\t// console.log(evt.geometry);\n\t\t\t// console.log('entering loop');\n\n\n\t\t\tfor (var i = 0; i < evt.geometry.rings[0].length; i++) {\n\t\t\t\tpolystring += evt.geometry.rings[0][i][0] + ' ';\n\t\t\t\tpolystring += evt.geometry.rings[0][i][1] + ', ';\n\t\t\t}\n\t\t\tvar len = polystring.length;\n\t\t\tpolystring = polystring.substring(0, len - 2);\n\t\t\ttreatment_polygons[treatment] = polystring;\n\t\t\t// console.log('exec CapeCodMa.Get_NitrogenFromPolygon \\'' + polystring + '\\'');\n\n\t\t\t// console.log(polystring);\n\t\t\tvar url = \"/testmap/Nitrogen\" + '/' + treatment + '/' + polystring;\n\t\t\t// var url = '/polygon/' + func + '/' + treatment + '/' + polystring;\n\t\t\t// console.log(url);\n\t\t\t$.ajax({\n\t\t\t\t\tmethod: 'GET',\n\t\t\t\t\turl: url\n\t\t\t\t})\n\t\t\t\t.done(function(msg) {\n\t\t\t\t\t// msg = $.parseJSON(msg);\n\t\t\t\t\t// console.log(msg);\n\t\t\t\t\t// console.log(msg);\n\t\t\t\t\t// var txtmsg = \"Total Nitrogen in Polygon: \" + msg[0].UnAttenFull;\n\t\t\t\t\t// alert(txtmsg);\n\t\t\t\t\t// console.log('success');\n\t\t\t\t\t// var poly_nitrogen = msg.poly_nitrogen->Septic;\n\t\t\t\t\t$('#total_nitrogen_polygon').text(msg);\n\t\t\t\t\t$('#popdown-opacity').show();\n\t\t\t\t\t\n\t\t\t\t});\n\n\t\t\t// console.log(symbol);\n\t\t\tvar area = evt.geometry.getExtent();\n\t\t\t// console.log(area);\n\t\t\t// map.centerAndZoom(area, 11);\n\t\t\t// console.log(treatment_polygons);\n\t\t}\n\n\t\n\t\t/*******************************\n\t\t *\n\t\t *\tThis is the ArcGIS Basemap Gallery which (used to) break everything\n\t\t *\n\t\t *********************************/\n\n\t\tvar basemapGallery = new BasemapGallery({\n\t\t       showArcGISBasemaps: true,\n\t\t       map: map\n\t\t     }, \"basemapGallery\");\n\t\t     basemapGallery.startup();\n\n\t\t     basemapGallery.on(\"error\", function(msg) {\n\t\t       console.log(\"basemap gallery error:  \", msg);\n\t\t     });\n\n\n\t\tvar extent;\n\n\n\t\tvar embayments = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/4', {\n\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\toutFields: [\"*\"],\n\t\t\t// maxAllowableOffset: map.extent,\n\t\t\topacity: 1\n\t\t});\n\t\tembayments.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tmap.addLayer(embayments);\n\t\t// var point = (embayments.X_Centroid, embayments.Y_Centroid);\n\t\t// map.centerAndZoom(point, 11);\n\t\t// map.setExtent(embayments.fullExtent);\n\n\n\t\tvar Subwatersheds = new FeatureLayer(\"http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/6\", {\n\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\toutFields: [\"*\"],\n\t\t\t// maxAllowableOffset: map.extent,\n\t\t\topacity: 1\n\t\t});\n\t\tSubwatersheds.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tSubwatersheds.hide();\n\t\t// Subwatersheds.setExtent(extent);\n\t\tmap.addLayer(Subwatersheds);\n\n\n\t\tvar Subembayments = new FeatureLayer(\"http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/11\", {\n\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\toutFields: [\"*\"],\n\t\t\topacity: 1\n\t\t});\n\t\tSubembayments.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tSubembayments.hide();\n\t\t// console.log(Subembayments);\n\t\tmap.addLayer(Subembayments);\n\n\t\tvar NitrogenLayer = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/0', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: 1\n\t\t\t}\n\n\t\t);\n\t\tNitrogenLayer.setDefinitionExpression('Embay_id = ' + selectlayer);\n\t\tNitrogenLayer.hide();\n\t\tmap.addLayer(NitrogenLayer);\n\n\n\t\tvar WasteWater = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/1', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: 1\n\t\t\t}\n\n\t\t);\n\t\tWasteWater.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tWasteWater.hide();\n\t\tmap.addLayer(WasteWater);\n\n\n\t\tvar Towns = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/5', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: .4,\n\t\t\t\t// styling: false,\n\t\t\t\tcolor: [255, 0, 0, 1],\n\t\t\t\twidth: 3\n\t\t\t}\n\n\t\t);\n\t\tTowns.hide();\n\t\tmap.addLayer(Towns);\n\n\n\t\tvar TreatmentType = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/10', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: 1\n\t\t\t}\n\n\t\t);\n\t\tTreatmentType.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tTreatmentType.hide();\n\t\tmap.addLayer(TreatmentType);\n\n\n\t\tvar TreatmentFacilities = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/9', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: 1\n\t\t\t}\n\n\t\t);\n\t\tTreatmentFacilities.hide();\n\t\tmap.addLayer(TreatmentFacilities);\n\n\n\t\tvar EcologicalIndicators = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/Projects/208_Plan/MapServer/10', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: 1\n\t\t\t}\n\n\t\t);\n\t\tEcologicalIndicators.hide();\n\t\tmap.addLayer(EcologicalIndicators);\n\n\t\tvar ShallowGroundwater = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/Projects/208_Plan/MapServer/32', {\n\t\t        mode: FeatureLayer.MODE_ONDEMAND,\n\t\t        outFields: [\"*\"],\n\t\t        opacity: .5\n\t\t    }\n\n\t\t);\n\t\tShallowGroundwater.hide();\n\t\tmap.addLayer(ShallowGroundwater);\n\n\n\t\tvar LandUse = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/3', {\n\t\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\t\toutFields: [\"*\"],\n\t\t\t\topacity: .5\n\t\t\t}\n\n\t\t);\n\t\tLandUse.setDefinitionExpression('EMBAY_ID = ' + selectlayer);\n\n\t\tLandUse.hide();\n\t\tmap.addLayer(LandUse);\n\n\t\tvar FlowThrough = new FeatureLayer('http://gis-services.capecodcommission.org/arcgis/rest/services/wMVP/wMVP3/MapServer/12', {\n\t\t\tmode: FeatureLayer.MODE_ONDEMAND,\n\t\t\toutFields: [\"*\"]\n\t\t\t\t// opacity: 1\t\n\t\t});\n\t\tFlowThrough.hide();\n\t\tmap.addLayer(FlowThrough);\n\n\n\t\t// console.log('testing');\n\t\t// Turn on/off each layer when the user clicks the link in the sidebar.\n\n\t\t$('#nitrogen').on('click', function(e) {\n\t\t\te.preventDefault();\n\t\t\t// console.log(NitrogenLayer);\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tNitrogenLayer.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tNitrogenLayer.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\n\t\t$('#subembayments').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tSubembayments.show();\n\t\t\t\t// console.log(Subembayments);\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tSubembayments.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#subwatersheds').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tSubwatersheds.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tSubwatersheds.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#wastewater').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tWasteWater.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tWasteWater.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\n\t\t$('#towns').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tTowns.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tTowns.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#treatmenttype').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tTreatmentType.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tTreatmentType.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#treatmentfacilities').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tTreatmentFacilities.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tTreatmentFacilities.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\n\t\t$('#ecologicalindicators').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tEcologicalIndicators.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tEcologicalIndicators.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#shallowgroundwater').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tShallowGroundwater.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tShallowGroundwater.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t\t$('#landuse').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tLandUse.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tLandUse.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\n\t\t$('#flowthrough').on('click', function(e) {\n\t\t\te.preventDefault();\n\n\t\t\tif ($(this).attr('data-visible') == 'off') {\n\t\t\t\tFlowThrough.show();\n\t\t\t\t$(this).attr('data-visible', 'on');\n\t\t\t} else {\n\t\t\t\tFlowThrough.hide();\n\t\t\t\t$(this).attr('data-visible', 'off');\n\t\t\t}\n\t\t\t// \n\t\t});\n\n\t});\n","/*!\n * Simple jQuery Popdown Plugin & Content Loader\n *\n * @author   : http://twitter.com/SeanNieuwoudt\n * @author   : http://twitter.com/wixelhq\n * @url\t\t : http://github.com/Wixel/jquery-popdown.git\n * @copyright: 2015 Wixel\n * @license  : MIT license\n * @version  : 1.1\n */\n;(function($){\n\n\t/**\n\t * Generate & display the popdown\n\t *\n\t * @param string uri (content to load)\n\t * @param object options\n\t * @return void\n\t */\n\t$.fn.show_popdown = function(uri, options) {\n\n\t\t// Remove previous containers if they exist\n\t\tif($('#popdown-opacity').length > 0) {\n\t\t\t$('#popdown-opacity').remove();\n\t\t}\n\n\t\t// Construct the background blend\n\t\topacity = $('<div />').attr('id', 'popdown-opacity').css({\n\t\t\tposition: 'absolute',\n\t\t\tbottom\t\t: 400,\n\t\t\tleft\t: 0,\n\t\t\twidth \t: $(document).outerWidth(true),\n\t\t\t// height \t: $(document).outerHeight(true),\n\t\t\t// height: 450px,\n\t\t\tzIndex\t: 99998,\n\t\t\tdisplay : 'none'\n\t\t});\n\n\t\t// Construct the content container\n\t\tcontainer = $('<div class=\"popdown-loading\" />').attr('id', 'popdown-dialog').css({\n\t\t\tmaxWidth   : options.width,\n\t\t\t// height  : options.height,\n\t\t\tzIndex\t: 99999,\n\t\t\tmargin\t: '0 auto',\n\t\t\tposition: 'relative',\n\t\t\tdisplay : 'none'\n\t\t});\n\n\t\t// Let's add the opacity to the doc body\n\t\t$('body').append(opacity)\n\n\t\t// Fade in the background blend & add content container\n\t\t$('#popdown-opacity').fadeIn(100).append(container);\n\n\t\t// Fade in the container and load the data\n\t\t$('#popdown-opacity').append(container).stop().animate({\n\t\t\topacity: 1.0\n\t\t}, 100, function() {\n\t\t\t$('#popdown-dialog').fadeIn(50, function(){\n\t\t\t\t$.get(uri, function(resp) {\n\t\t\t\t\t$('#popdown-dialog').html(resp).addClass('popdown-done').removeClass('popdown-loading');\n\t\t\t\t\t$(\"html, body\").animate({ scrollTop: 0 }, \"fast\");\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Close the popdown and remove it from the DOM\n\t *\n\t * @return void\n\t */\n\t$.fn.close_popdown = function() {\n\t\tif($('#popdown-opacity').length > 0) {\n\t\t\t$('#popdown-dialog').stop().animate({\n\t\t\t\topacity:0,\n\t\t\t\theight:0\n\t\t\t}, 200, function(){\n\t\t\t\t$('#popdown-opacity').remove();\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Initialize the popdown plugin\n\t *\n\t * @return void\n\t */\n\t$.fn.popdown = function(options) {\n\n\t\tvar defaults = {\n\t\t\twidth :610,\n\t\t\theight:'auto'\n\t\t};\n\n\t\tvar options = $.extend(defaults, options);\n\n\t\t// Re-size the opacity when the window is resized\n\t\t$(window).resize(function() {\n\t\t\tif($('#popdown-opacity').length > 0) {\n\t\t\t\t$('#popdown-opacity').css({\n\t\t\t\t\twidth : $(document).outerWidth(),\n\t\t\t\t\theight: $(document).outerHeight()\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\t// Bind the document ESC key\n\t\t$(document).keyup(function(e){\n\t\t\tif(e.keyCode === 27) {\n\t\t\t\t$.fn.close_popdown();\n\t\t\t}\n\t\t});\n\n\t\t// General element to close the popdown\n\t\t$(document).on('click', '.close-popdown', function(e){\n\t\t\tif(!$(this).is('.close-popdown'))  {\t //Only close when someone click on the html element with close-popdown class\n\t\t\t\te.preventDefault();\n\t\t\t}\n\t\t\t$.fn.close_popdown();\n\t\t});\n\n\t\t// Close popdown when user clicks outside its container\n\t\t$(document).click(function(event) {\n\t    if(!$(event.target).closest('#popdown-dialog').length) {\n        if($('#popdown-dialog').is(\":visible\")) {\n          $.fn.close_popdown();\n        }\n\t    }\n\t\t});\n\n\t\t// Bind to each matching element\n\t\treturn this.each(function() {\n\n\t\t\tvar self = $(this);\n\n\t\t\tself.bind('click', function(e){\n\n\t\t\t\tif(self.is('a')) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}\n\n\t\t\t\tif($('#popdown-opacity').is(':visible')) {\n\t\t\t\t\t$.fn.close_popdown();\n\t\t\t\t} else {\n\t\t\t\t\tif(self.data('uri')) {\n\t\t\t\t\t\t$.fn.show_popdown(self.data('uri'), options);\n\t\t\t\t\t} else if(self.attr('href')) {\n\t\t\t\t\t\t$.fn.show_popdown(self.attr('href'), options);\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert(\"No popdown dialog set for this action.\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n})(jQuery);\n",""],"sourceRoot":"/source/"}